<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Installing Shoko Server | Shoko</title>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css integrity=sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2 crossorigin=anonymous><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;500;600&family=Mulish:wght@300;400;500;600;700&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css><link rel=stylesheet href=https://docs.shokoanime.com/assets/css/main.min.css><link rel=stylesheet href=https://docs.shokoanime.com/assets/css/light.min.css id=light><link rel=stylesheet href=https://docs.shokoanime.com/assets/css/dark.min.css id=dark><link rel=stylesheet href=https://docs.shokoanime.com/assets/css/media.min.css><link rel=stylesheet href=https://unpkg.com/smartphoto@1.1.0/css/smartphoto.min.css><meta property="og:title" content="Installing Shoko Server"><meta property="og:description" content="Information on how to install Shoko Server."><meta property="og:type" content="article"><meta property="og:url" content="https://docs.shokoanime.com/server/install/"><meta property="og:image" content="https://docs.shokoanime.com/icon.png"><meta property="article:modified_time" content="2023-08-19T12:51:02+02:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://docs.shokoanime.com/icon.png"><meta name=twitter:title content="Installing Shoko Server"><meta name=twitter:description content="Information on how to install Shoko Server."></head><body data-spy=scroll data-target=#page-nav data-offset=80 class=lang-en><div class=page-wrapper><div class=main-nav-wrapper><h3 class=main-nav-header>Shoko Docs</h3><div class=main-nav-link-wrapper><ul class="nav nav-sidebar nav-sidebar-pill" data-accordion=false><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>Shoko Server<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu active" href=/server/install>How To Install</a>
<a class="nav-link nav-menu" href=/server/setup>First Run Setup</a></div></li><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>Shoko Desktop<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu" href=/desktop/install>How To Install</a></div></li><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>Shoko Metadata<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu" href=/shokometadata/install>How To Install</a>
<a class="nav-link nav-menu" href=/shokometadata/setup>Setup Shoko Metadata</a></div></li><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>Shokofin<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu" href=/shokofin/install>How To Install</a></div></li><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>My Anime 3<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu" href=/myanime3/install>Install & Configuration</a>
<a class="nav-link nav-menu" href=/myanime3/overview>Using My Anime 3</a></div></li><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>Changelog<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu" href=/changelog/server>Shoko Server</a>
<a class="nav-link nav-menu" href=/changelog/desktop>Shoko Desktop</a>
<a class="nav-link nav-menu" href=/changelog/webui>Shoko WebUI</a>
<a class="nav-link nav-menu" href=/changelog/shokometadata>Shoko Metadata</a>
<a class="nav-link nav-menu" href=/changelog/shokofin>Shokofin</a>
<a class="nav-link nav-menu" href=/changelog/myanime3>My Anime 3</a></div></li><li class=nav-item><a href=/faq>Frequently Asked Questions</a></li><span class=nav-secondary></span><li class=nav-item><a id=themeSwitcher href=#>Dark Theme</a></li><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>Language<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu" href=/translate>Translate</a></div></li></ul></div></div><div class=page-outer-wrapper><div class=top-nav-wrapper><div class=top-nav-link-wrapper><nav class="navbar navbar-expand-lg navbar-dark"><div class="navbar-nav nav-links top-nav-links"><a class="navbar-link top-nav-link" href=https://docs.shokoanime.com>Home</a>
<a class="navbar-link top-nav-link" href=https://shokoanime.com>Website</a>
<a class="navbar-link top-nav-link" href=https://discord.gg/vpeHDsg target=_blank rel=noopener>Support</a>
<a class="navbar-link top-nav-link" href=https://github.com/ShokoAnime/ShokoDocs target=_blank rel=noopener>Github</a></div><div class=search-wrapper><i class="fas fa-search top-nav-search-icon"></i><form name=cse id=searchbox action=/search/ method=get><input type=hidden name=cx value=000649133662658939805:7nv0dx66q_4>
<input type=hidden name=ie value=utf-8>
<input type=hidden name=hl value=en>
<input name=q type=text class=search-input autocomplete=off placeholder="Search ShokoDocs..."></form></div><span class=shoko-text>Shoko Docs</span>
<span class=navbar-toggler onclick=openNav()><i class="navbar-mobile-icon fas fa-bars fa-lg"></i></span><div class=navbar-collapse id=mobileSidenav><div class=navbar-mobile><a class=sidenav-close href=javascript:void(0) onclick=closeNav()>×</a><ul class="nav nav-sidebar nav-sidebar-pill" data-accordion=false><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>Shoko Server<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu active" href=/server/install>How To Install</a>
<a class="nav-link nav-menu" href=/server/setup>First Run Setup</a></div></li><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>Shoko Desktop<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu" href=/desktop/install>How To Install</a></div></li><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>Shoko Metadata<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu" href=/shokometadata/install>How To Install</a>
<a class="nav-link nav-menu" href=/shokometadata/setup>Setup Shoko Metadata</a></div></li><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>Shokofin<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu" href=/shokofin/install>How To Install</a></div></li><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>My Anime 3<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu" href=/myanime3/install>Install & Configuration</a>
<a class="nav-link nav-menu" href=/myanime3/overview>Using My Anime 3</a></div></li><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>Changelog<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu" href=/changelog/server>Shoko Server</a>
<a class="nav-link nav-menu" href=/changelog/desktop>Shoko Desktop</a>
<a class="nav-link nav-menu" href=/changelog/webui>Shoko WebUI</a>
<a class="nav-link nav-menu" href=/changelog/shokometadata>Shoko Metadata</a>
<a class="nav-link nav-menu" href=/changelog/shokofin>Shokofin</a>
<a class="nav-link nav-menu" href=/changelog/myanime3>My Anime 3</a></div></li><li class=nav-item><a href=/faq>Frequently Asked Questions</a></li><li class=nav-item><a id=themeSwitcherMobile href=#>Dark Theme</a></li><li class=nav-item><a class="nav-link nav-menu sidenav-menu" href=#>Language<i class=nav-angle></i></a><div class="nav nav-title-wrapper"><a class="nav-link nav-menu" href=/translate>Translate</a></div></li></ul></div></div></nav></div></div><div class=breadcrumb-outer-wrapper><div class=breadcrumb-wrapper><div class=breadcrumb-list><a href=/>Shoko</a>
<span class=breadcrumb-separator>/</span>
<a href=/server>Server</a>
<span class=breadcrumb-separator>/</span>
<span class=breadcrumb-active>Installing Shoko Server</span></div><div class=github-wrapper><i class="fab fa-github github-icon"></i>
<a href=https://github.com/shokoanime/Shokodocs/blob/master/content/en/server/install.md>Edit On GitHub</a></div></div></div><div class=page-section-wrapper><div class=page-content-wrapper><h2 class=page-first-header id=is-shoko-server-mandatory>Is Shoko Server Mandatory?</h2><p>The short answer, <strong>Yes</strong>.</p><p>Shoko Server is where all the magic happens. It acts as a central database for every program and plugin under the Shoko
suite allowing you to access, maintain and watch your anime collection. This also means that Shoko Server <strong>must be
running</strong> to use any other program or plugin that connect to it. Outside of file importing, Shoko Server is no more
resource intensive than other programs you probably have running in the background, so you don&rsquo;t need to worry about
Shoko Server eating up resources.</p><h3 id=windows>Windows</h3><p><a href=/assets/images/shoko-server/Shoko-Server-Install-Windows-01.jpg class=js-smartPhoto data-caption="Shoko Server - Windows Install" data-id data-group=images><img class=markdown-image src=/assets/images/shoko-server/Shoko-Server-Install-Windows-01.jpg alt="Shoko Server - Windows Install" loading=lazy></a></p><p>Navigate to the <a href=https://shokoanime.com/downloads/ target=_blank rel=noopener>Shoko Downloads</a> page and download <strong>Shoko Server</strong>, unless told
otherwise we always recommend downloading the <strong>Stable</strong> version. The installer will guide you through the installation
process and should only take a couple of minutes.</p><h3 id=docker-linux>Docker (Linux)</h3><p>Make sure you have docker installed before you continue. For most users are installing docker from their package manager
is advised, this way you will keep up with the latest updates and security updates. On the homepage
of <a href=https://docs.docker.com/install/ target=_blank rel=noopener>Docker</a> you can find the installation procedure for your distribution of the
Docker Community Edition.</p><p>First things first, download the image, and unless otherwise told, install the version tagged as <code>latest</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ docker pull shokoanime/server:latest
</span></span></code></pre></div><p>Now, you can run the command below, after substituting the paths below (the second and third volume mount point) with
path(s) leading to your library and/or import folders.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ docker run -d --name shokoserver --restart always -p 8111:8111 -v <span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.shoko:/home/shoko/.shoko&#34;</span> -v <span style=color:#e6db74>&#34;/path/to/anime:/mnt/anime&#34;</span> -v <span style=color:#e6db74>&#34;/path/to/import:/mnt/import&#34;</span> -e PUID<span style=color:#f92672>=</span>$UID -e PGID<span style=color:#f92672>=</span>$GID --shm-size 256m shokoanime/server:latest
</span></span></code></pre></div><p>If you want a more detailed explanation, then refer to the below table for a break-down of the above command:</p><table class="table table-bordered"><thead><tr><th>Command</th><th>Purpose</th></tr></thead><tbody><tr><td><pre>docker run</pre></td><td><a href=https://docs.docker.com/engine/reference/run/ target=_blank rel=noopener>Create a docker
container from an image.</a></td></tr><tr><td><pre>-d</pre></td><td><a href=https://docs.docker.com/engine/reference/run/#detached--d target=_blank rel=noopener>Run in
detached mode.</a><br><br>Offloads the process to the background. If you want to control the container, you can
either omit this flag or run docker attach followed by the container name to reattach to the container.</td></tr><tr><td><pre>--name shokoserver</pre></td><td><a href=https://docs.docker.com/engine/reference/run/#name---name target=_blank rel=noopener>Name the
container.</a><br><br>If you do not assign a container name with the <code>--name</code> option, then the daemon generates a
random string name for you. Defining a name can be a handy way to add meaning to a container. If you specify
a name, you can use it when referencing the container within a Docker network.</td></tr><tr><td><pre>--restart</pre></td><td><a href=https://docs.docker.com/engine/reference/run/#restart-policies---restart target=_blank rel=noopener>Automatically restart the server on failure.</a><br><br>Make the container automatically restart
if it fails. Shoko is bound to fail a few times, so setting this flag ensures that it will automatically
restart and resume where it left of.</td></tr><tr><td><pre>-p 8111:8111</pre></td><td><a href=https://docs.docker.com/engine/reference/run/#expose-incoming-ports target=_blank rel=noopener>Publish the container's ports.</a><br><br>Binds the container's port to the same port on the host
system, because otherwise a random port will be chosen on the host system - which we don't want to happen.</td></tr><tr><td><pre>-v "$HOME/.shoko:/home/shoko/.shoko"</pre></td><td><a href=https://docs.docker.com/engine/reference/run/#volume-shared-filesystems target=_blank rel=noopener>Mounts volumes.</a><br><br>To preserve settings between updates, the settings folder must be
remapped to a location outside the container. By default we map it to a folder in the user's home directory</td></tr><tr><td><pre>-v "/path/to/anime:/mnt/anime" -v "/path/to/import:/mnt/import"</pre></td><td><a href=https://docs.docker.com/engine/reference/run/#volume-shared-filesystems target=_blank rel=noopener>Mounts volumes.</a><br><br>In order for Shoko Server to manage your collection, you must map at
least one volume to the container.<br><br><strong>Note #1:</strong> The first path in the mapping (<code>/path/to/anime</code>) is the location on your host
computer, the second path (<code>/mnt/anime</code>) in the mapping is where you want to mount it inside the container.<br><br><strong>Note #2:</strong> You can mount multiple library folders, and/or import folders, and they can be named
any way you like (e.g. /anime, /import, /export, /tv_shows, etc.).<br><br><strong>Note #3:</strong> When importing hard-linked files, be sure to mount the common root between your import folder and library
folder. Otherwise you will get duplicate files, because the containers sees the mount-points as separate
disks, and will copy-and-delete the file from the import folder to the drop-destination.</td></tr><tr><td><pre>-e PUID=$UID -e PGID=$GID</pre><pre>-e TZ=Etc/UTC</pre></td><td><a href=https://docs.docker.com/engine/reference/run/#env-environment-variables target=_blank rel=noopener>Set Environment Variables.</a><br><br>You can instruct the server to run as a certain set of
user/group ids. This makes working with permissions a lot easier since you can match your server with a
local account without effort. The example argument will make the server run with the uid and gid of the
current user, to find the value to use for <code>PUID</code> and <code>PGID</code>, you can run log into the target
system, either locally or over SSH, and execute the id command, supplied with the username of the user you
want to the server to run as.<br><br>You can set the timezone with the <code>TZ</code> environment variable.</td></tr><tr><td><pre>shokoanime/server:latest</pre></td><td><a href=https://docs.docker.com/engine/reference/run/ target=_blank rel=noopener>Specifies the Image
to derive the container from.</a></td></tr><tr><td><pre>--shm-size 256m</pre></td><td><a href=https://docs.docker.com/engine/reference/run/#runtime-constraints-on-resources target=_blank rel=noopener>Set Larger Shared Memory for AVDump3.</a><br><br>AVDump3 requires access to a larger portion of shared IPC memory than the <strong>64MB</strong> available by
default in docker containers, otherwise it might core dump when starting the dump process. Increasing it to
<strong>256MB</strong> is enough to avoid this.<br><br><strong>Note:</strong> AVDump3 is currently only available on the <strong>daily</strong> version of the server.
If you're on <strong>stable</strong> then you can ignore this argument.</td></tr><tr><td><pre>-e AVDUMP_MONO=true</pre></td><td><a href=https://docs.docker.com/engine/reference/run/#env-environment-variables target=_blank rel=noopener>Set Environment Variable for AVDump2.</a><br><br>AVDump2 currently requires large dependencies, so by specifying this environment variable, it tells the container
to pull the dependencies for AVDump2 to work.<br><br><strong>Note:</strong> AVDump2 is currently only available on the <strong>stable</strong> version of the server.
If you're on <strong>daily</strong> then you can ignore this argument.</td></tr></tbody></table><h3 id=docker-compose-linux>Docker Compose (Linux)</h3><p>To make management easier, we can combine all the previous items in a docker compose file.</p><p>In order to make this work, install docker-compose, a guide how to can be
found <a href=https://docs.docker.com/compose/install/ target=_blank rel=noopener>here</a> on the Docker website. Once <strong>docker-compose</strong> is installed,
create a <strong>docker-compose.yml</strong> file anywhere on your system. Open the file and put the following inside, but remember
to substitute the paths below with path(s) leading to your library and/or import folders.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#34;3&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>shoko_server</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>shm_size</span>: <span style=color:#ae81ff>256m</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>shokoserver</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>shokoanime/server:latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>always</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;PUID=$UID&#34;</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;PGID=$GID&#34;</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;TZ=Etc/UTC&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;8111:8111&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;$HOME/.shoko:/home/shoko/.shoko&#34;</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;/path/to/anime:/mnt/anime&#34;</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;/path/to/import:/mnt/import&#34;</span>
</span></span></code></pre></div><p>This combines all of our previous configuration in an easy to read and edit format, and will allow you to create a
powerful startup script that could (for example) include a MySQL server, a download client, and anything else you can
think of that’s available in a docker format.</p><h4 id=synology-nas>Synology NAS</h4><p>Make sure you have <a href=https://www.synology.com/en-global/dsm/packages/Docker target=_blank rel=noopener>Docker</a> installed on your Synology NAS
before you continue. This package can be found in the Package Center, under Third-party.</p><p>You will need to find your User ID (UID) before continuing. Log in to your Synology NAS using SSH and type <code>id</code>.
You&rsquo;ll see the UID: note down the number for later. To avoid getting your database cleared on updates, you can also
create a folder in the <code>docker</code> shared folder named <code>shokoserver</code> on the host and map it to <code>/home/shoko/.shoko</code>
in the container with R/W access.</p><p>Open Docker from the Application Menu, then go to the Containers tab. You&rsquo;ll need to download the
<a href=/server/synology-dockerfile.json>Synology Container File</a> and <strong>fill out the anime folder path and replace the <code>PUID</code> your User&rsquo;s ID you previously acquired</strong>.
Once that&rsquo;s done, go to Settings, Import and select the file you&rsquo;ve just modified. Name the container <code>shokoserver</code>, then apply!</p><p><strong>Note #1:</strong> If you want to edit volumes or environment variables, you&rsquo;ll need to stop the container first.<br><br><strong>Note #2:</strong> If you intend to use the <strong>daily</strong> version of the server then
AVDump3 might crash since we are unable to modify the shared IPC memory size through the proprietary
container format Synology uses, so if you do use this method to install the server then you have been
warned.</p><h2 id=next-step>Next Step</h2><p>Once the server is installed, follow the instructions on the <a href=/server/setup>First Run Setup</a> page to configure your
fresh install of Shoko Server.</p></div><div class=page-nav-wrapper><div class="nav-links-wrapper page-nav-link-wrapper"><ul class="nav flex-column flex-nowrap" id=page-nav><li class=page-nav-title>Install Platforms</li><li class=nav-item><a class="nav-link nav-menu page-nav-link" href=#windows>Windows</a></li><li class=nav-item><a class="nav-link nav-menu page-nav-link" href=#docker-linux>Docker (Linux)</a></li><li class=nav-item><a class="nav-link nav-menu page-nav-link" href=#docker-compose-linux>Docker Compose (Linux)</a></li><li class=nav-item><a class="nav-link nav-menu page-nav-link" href=#next-step>Next Step</a></li></ul></div></div></div><div class=footer-wrapper><div class=footer-info><div class=footer-links><a href=https://shokoanime.com target=_blank>Website</a>
<a class=footer-links-spacer href=https://discord.gg/vpeHDsg target=_blank>Support</a>
<a href=https://github.com/ShokoAnime/ target=_blank>GitHub</a></div><div class=footer-copyright><p>© 2024 Shoko. All Rights Reserved.</p></div></div></div></div></div><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js integrity=sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx crossorigin=anonymous></script><script src=https://unpkg.com/smartphoto@1.1.0/js/smartphoto.min.js></script><script src=https://docs.shokoanime.com/assets/js/main.js></script></body></html>